{% extends "base.html" %}
{% block content %}

<div class="chat-area" id="chatArea">
  {% if chat|length == 0 %}
    <div class="empty-state">
      <h5 class="mb-2">Upload a PDF, then ask your question.</h5>
      <div class="text-muted">
        The system will answer only from the uploaded PDF.
      </div>
    </div>
  {% endif %}

  {% for m in chat %}
    {% if m.role == "user" %}
      <div class="msg-row user">
        <div class="msg-bubble user-bubble">{{ m.content }}</div>
      </div>
    {% else %}
      <div class="msg-row assistant">
        <div class="msg-bubble assistant-bubble">
          <div class="answer-text">{{ m.content }}</div>
          {% if m.source %}
            <div class="source-text">{{ m.source }}</div>
          {% endif %}
        </div>
      </div>
    {% endif %}
  {% endfor %}
</div>

<!-- Bottom Input Bar -->
<div class="input-bar">
  <div class="container">
    <div class="d-flex gap-2 align-items-center">
      <!-- hidden file input -->
      <input type="file" id="pdfFile" accept="application/pdf" hidden />

      <button class="btn btn-outline-secondary" id="uploadBtn">
        Upload PDF
      </button>

      <input
        class="form-control"
        id="questionInput"
        placeholder="Ask a question about the PDF..."
        disabled
      />

      <button class="btn btn-primary" id="sendBtn" disabled>
        Send
      </button>
    </div>

    <div class="small text-muted mt-2" id="statusLine"></div>
  </div>
</div>

{% endblock %}